<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç TESTE - Bot√µes Direto no index.html</title>
    <style>
        body {
            font-family: Georgia, serif;
            background: #1a1a1a;
            color: #f5f5f5;
            padding: 40px;
            max-width: 1000px;
            margin: 0 auto;
        }
        h1 { color: #d4af37; text-align: center; }
        .test-box {
            background: #2d2d2d;
            border: 2px solid #d4af37;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        .code {
            background: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            overflow-x: auto;
            margin: 10px 0;
        }
        button {
            background: #d4af37;
            color: #1a1a1a;
            border: none;
            padding: 10px 20px;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px 10px 0;
        }
        button:hover { background: #e8c547; }
        .result {
            background: #1a3a1a;
            border: 1px solid #7cf07c;
            color: #7cf07c;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .error {
            background: #3a1a1a;
            border: 1px solid #ff6b6b;
            color: #ff6b6b;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>üîç TESTE - Investigar Problema dos Bot√µes</h1>

    <div class="test-box">
        <h2>1Ô∏è‚É£ Teste de Elemento</h2>
        <p>Verificar se o bot√£o addEducationBtn existe no index.html</p>
        <button onclick="testarElemento()">üîç Procurar Elemento</button>
        <div id="resultado1"></div>
    </div>

    <div class="test-box">
        <h2>2Ô∏è‚É£ Teste de Click Direto</h2>
        <p>Simular um clique diretamente no bot√£o</p>
        <button onclick="testarClickDireto()">üñ±Ô∏è Simular Click</button>
        <div id="resultado2"></div>
    </div>

    <div class="test-box">
        <h2>3Ô∏è‚É£ Teste de Listener Manual</h2>
        <p>Adicionar um listener manualmente e testar</p>
        <button onclick="testarListener()">üîî Testar Listener</button>
        <div id="resultado3"></div>
    </div>

    <div class="test-box">
        <h2>4Ô∏è‚É£ Teste de iframe com index.html</h2>
        <p>Carregar index.html em iframe e testar l√°</p>
        <button onclick="testarIframe()">üì¶ Carregar iframe</button>
        <div id="resultado4"></div>
        <iframe id="iframeTest" style="width: 100%; height: 600px; border: 1px solid #d4af37; margin-top: 10px; display: none;"></iframe>
    </div>

    <div class="test-box">
        <h2>5Ô∏è‚É£ Abrir index.html Completo</h2>
        <button onclick="window.location.href='index.html'">üöÄ Abrir index.html</button>
    </div>

    <script>
        function adicionar(id, html) {
            const el = document.getElementById(id);
            if (el) el.innerHTML += html;
        }

        function testarElemento() {
            adicionar('resultado1', '<div style="margin: 10px 0;">‚è≥ Carregando...</div>');
            
            setTimeout(() => {
                // Tentar carregar index.html
                fetch('index.html')
                    .then(r => r.text())
                    .then(html => {
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(html, 'text/html');
                        
                        const btn = doc.getElementById('addEducationBtn');
                        if (btn) {
                            adicionar('resultado1', 
                                `<div class="result">
                                    ‚úÖ Bot√£o ENCONTRADO no HTML!
                                    <div class="code">id: ${btn.id}
class: ${btn.className}
text: ${btn.textContent}</div>
                                </div>`
                            );
                        } else {
                            adicionar('resultado1',
                                `<div class="error">‚ùå Bot√£o N√ÉO ENCONTRADO no HTML!</div>`
                            );
                        }
                    })
                    .catch(e => {
                        adicionar('resultado1', 
                            `<div class="error">‚ùå Erro ao carregar: ${e.message}</div>`
                        );
                    });
            }, 100);
        }

        function testarClickDireto() {
            adicionar('resultado2', '<div style="margin: 10px 0;">‚è≥ Carregando index.html...</div>');
            
            const iframe = document.createElement('iframe');
            iframe.src = 'index.html';
            iframe.style.display = 'none';
            document.body.appendChild(iframe);
            
            iframe.onload = () => {
                try {
                    const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                    const btn = iframeDoc.getElementById('addEducationBtn');
                    
                    if (btn) {
                        adicionar('resultado2', 
                            `<div class="result">‚úÖ Bot√£o encontrado no iframe</div>`
                        );
                        
                        // Log quando clica
                        const originalClick = btn.onclick;
                        let clicado = false;
                        
                        btn.addEventListener('click', (e) => {
                            clicado = true;
                            adicionar('resultado2',
                                `<div class="result">‚úÖ Click foi disparado!
                                <div class="code">Evento: ${e.type}</div></div>`
                            );
                        });
                        
                        btn.click();
                        
                        setTimeout(() => {
                            if (!clicado) {
                                adicionar('resultado2',
                                    `<div class="error">‚ùå Click foi executado mas listener n√£o respondeu</div>`
                                );
                            }
                        }, 500);
                    } else {
                        adicionar('resultado2',
                            `<div class="error">‚ùå Bot√£o n√£o encontrado no iframe</div>`
                        );
                    }
                } catch (e) {
                    adicionar('resultado2',
                        `<div class="error">‚ùå Erro: ${e.message}</div>`
                    );
                }
                
                setTimeout(() => document.body.removeChild(iframe), 3000);
            };
        }

        function testarListener() {
            adicionar('resultado3', '<div style="margin: 10px 0;">‚è≥ Testando listener...</div>');
            
            const iframe = document.createElement('iframe');
            iframe.src = 'index.html';
            iframe.style.display = 'none';
            document.body.appendChild(iframe);
            
            iframe.onload = () => {
                try {
                    const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                    const btn = iframeDoc.getElementById('addEducationBtn');
                    
                    if (btn) {
                        // Contar listeners
                        const listeners = getEventListeners(btn);
                        adicionar('resultado3',
                            `<div class="result">
                                ‚úÖ Bot√£o encontrado
                                <div class="code">Listeners registrados: ${listeners ? listeners.click ? listeners.click.length : 0 : 'N/A'}</div>
                            </div>`
                        );
                        
                        // Adicionar listener de teste
                        btn.addEventListener('click', () => {
                            adicionar('resultado3',
                                `<div class="result">‚úÖ Listener de teste funcionando!</div>`
                            );
                        });
                        
                        adicionar('resultado3',
                            `<div class="result">
                                <button onclick="
                                    const f = document.getElementById('iframeTest');
                                    const btn = (f.contentDocument || f.contentWindow.document).getElementById('addEducationBtn');
                                    if (btn) btn.click();
                                ">Clique aqui para testar o bot√£o no iframe</button>
                            </div>`
                        );
                    }
                } catch (e) {
                    adicionar('resultado3',
                        `<div class="error">‚ùå Erro: ${e.message}</div>`
                    );
                }
            };
        }

        function testarIframe() {
            const iframe = document.getElementById('iframeTest');
            iframe.src = 'index.html';
            iframe.style.display = 'block';
            
            adicionar('resultado4',
                `<div class="result">
                    ‚úÖ index.html carregado em iframe
                    <br><br>
                    <strong>Teste agora:</strong>
                    <ol>
                        <li>Fa√ßa login (user / senha)</li>
                        <li>Clique em "+ Adicionar Curso"</li>
                        <li>Observe o console (F12)</li>
                    </ol>
                </div>`
            );
        }
    </script>
</body>
</html>
